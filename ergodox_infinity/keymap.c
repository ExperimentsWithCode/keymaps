#include "ergodox_infinity.h"
#include "debug.h"
#include "action_layer.h"
#include "bootloader.h"
//
// Each layer gets a name for readability, which is then used in the keymap matrix below.
// The underscores don't mean anything - you can have a layer called STUFF or any other name.
// Layer names don't all need to be of the same length, obviously, and you can also skip them
// entirely and just use numbers.
#define _QWERTY 0
#define _WINDOWS 1
#define _GAMING 2
#define _UTILITY 3
#define _NUM_UTIL 4
#define _SYM_UTIL 5
#define _MOUSE_UTIL 6
// #define _BASE_ADJUSTER 4
// Fillers to make layering more clear
#define _______ KC_TRNS
#define XXXXXXX KC_NO

//
// Custom macros
#define CTL_ESC     CTL_T(KC_ESC)               // Tap for Esc, hold for Ctrl
#define HPR_TAB     ALL_T(KC_TAB)               // Tap for Tab, hold for Hyper (Super+Ctrl+Alt+Shift)
#define ALT_GRV     ALT_T(KC_GRV)               // Tap for Backtick, hold for Alt (Ctrl+Alt+Shift)
#define RCTRL_BSLS  RCTL_T(KC_BSLS)
#define SHFT_ESC    SFT_T(KC_ESC)
#define ALT_GRV     ALT_T(KC_GRV)               // Tap for Backtick, hold for Alt (Ctrl+Alt+Shift)
#define EXPAND       M(0)                        // Expand Atom nested functions
#define COLLAPSE     M(1)                        // Collapse Atom nested functions
#define JS_FUNC      M(2)                        // => {}
#define CTRL_ALT_DEL M(3)                   // Self explanitory
#define GB_PASTE     M(4)                       // Git Bash Paste
#define GB_RESET     M(5)                       // Git Bash Reset
#define VS_COLLAPSE  M(6)
#define SLDTY_FUNC   M(7)                        // () {}
#define ATM_P_L      M(8)
#define ATM_P_R      M(9)
#define ATM_P_D      M(10)
#define ATM_P_U      M(11)
// Touch / Hold Magic
#define GUI_BSPC GUI_T(KC_BSPC)
#define GUI_DEL GUI_T(KC_DEL)
#define GUI_BSLSH GUI_T(KC_BSLS)
#define CTRL_BSPC CTL_T(KC_BSPC)
#define CTRL_DEL CTL_T(KC_DEL)
#define CTRL_BSLSH CTL_T(KC_BSLS)
#define LALT_BSPC LALT_T(KC_BSPC)

// Layer Shifting
// Base
#define T_WIN TG(_WINDOWS)
#define T_GM TG(_GAMING)
#define T_MAIN TO(_QWERTY)
// Temporary
#define SYM_SPC LT(_SYM_UTIL,KC_SPC)
#define NUM_ENT LT(_NUM_UTIL,KC_ENT)
#define SYM_ENT LT(_SYM_UTIL,KC_ENT)
#define MOUSE_ENT LT(_MOUSE_UTIL,KC_ENT)
// #define Base_INS LT(_BASE_ADJUSTER,KC_INS)


//Tap Dance Declarations
enum {
  TD_PAREN = 0,
  TD_BRACK = 1,
  TD_CURLY = 2,
  TD_MAIN = 3,
  TD_WIN = 4,
  TD_GAME = 5,
};

//
//
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
//
  /* Keymap 0: Basic layer
   *
   * ,--------------------------------------------------.           ,--------------------------------------------------.
   * |   `    |   1  |   2  |   3  |   4  |   5  |  \   |           |   -  |   6  |   7  |   8  |   9  |   0  |   =    |
   * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
   * | Tab    |   Q  |   W  |   E  |   R  |   T  |   (  |           |  [   |   Y  |   U  |   I  |   O  |   P  |   '    |
   * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
   * |Ctrl/ \ |   A  |   S  |   D  |   F  |   G  |------|           |------|   H  |   J  |   K  |   L  | ;    |RCtrl / \ |
   * |--------+------+------+------+------+------|   )  |           |   ]  |------+------+------+------+------+--------|
* | Shift/Esc |   Z  |   X  |   C  |   V  |   B  |      |           |      |   N  |   M  |   ,  |   .  |  /   | Shift/Esc  |
   * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
   *   |  Up  | Down | Left | Right| Alt/`|                                       |Insert| Left | Right|  Up  | Down |
   *   `----------------------------------'                                       `----------------------------------'
   *                                        ,-------------.       ,-------------.
   *                                        | End  | Home |       | PgUp  |PgDn   |
   *                                 ,------|------|------|       |------+--------+------.
   *                                 | Enter|Backsp| Ply  |       | VolU |        |Space |
   *                                 |   /  |ace / |------|       |------|  Del/  |  /   |
   *                                 |Num_U |GUI   | Mute |       | VolD |  GUI   |Sym_U |
   *                                 `--------------------'       `----------------------'
   */
//
  [_QWERTY] = LAYOUT_ergodox(  // layer 0 : default
            // left hand
              KC_GRAVE  ,   KC_1   ,   KC_2   ,   KC_3   ,   KC_4   ,   KC_5   ,   KC_BSLS  ,
      //   |------------+----------+----------+----------+----------+----------+------------|
              KC_TAB    ,  KC_Q    ,  KC_W    ,   KC_E   ,   KC_R   ,   KC_T   ,  KC_LPRN,
      //   |------------+----------+----------+----------+----------+----------+
              CTRL_BSLSH,  KC_A    ,   KC_S   ,  KC_D    ,  KC_F    ,   KC_G   ,//------------|
      //   |------------+----------+----------+----------+----------+----------+
              SHFT_ESC  ,  KC_Z    ,   KC_X   ,  KC_C    ,   KC_V   ,   KC_B   ,  KC_RPRN,
      //   |------------+----------+----------+----------+----------+----------+------------|
                 KC_UP   ,  KC_DOWN , KC_LEFT  ,  KC_RGHT ,  ALT_GRV ,
      //      |----------+----------+----------+----------+----------|
                                                                        KC_END  ,   KC_HOME ,
      //                                                             |----------+----------|
                                                                                  KC_MPLY  ,
      //                                                                        |----------|
                                                             NUM_ENT , GUI_BSPC  ,  KC_MUTE  ,
      //                                                  |----------+----------+----------|
            // right hand
                         KC_MINUS ,   KC_6   ,   KC_7   ,  KC_8    ,  KC_9    ,   KC_0   ,  KC_EQUAL  ,
      //             |------------+----------+----------+----------+----------+----------+------------|
                       KC_LBRACKET,   KC_Y   ,  KC_U    ,   KC_I   ,   KC_O   ,   KC_P   ,  KC_QUOTE  ,
      //             |------------+----------+----------+----------+----------+----------+------------|
                                      KC_H   ,   KC_J   ,   KC_K   ,    KC_L  , KC_SCLN  , KC_QUOTE,
      //                          |----------+----------+----------+----------+----------+------------|
                       KC_RBRACKET,   KC_N   ,   KC_M   ,  KC_COMM ,  KC_DOT  , KC_SLSH  , SHFT_ESC,
      //             |------------+----------+----------+----------+----------+----------+------------|
                                         KC_INS ,  KC_LEFT ,  KC_RGHT ,  KC_UP   ,  KC_DOWN ,
      //                                |----------+----------+----------+----------+----------|
                       KC_PGUP  , KC_PGDOWN,
      //             |----------+----------|
                      KC__VOLUP ,
      //             |----------|
                     KC__VOLDOWN,  GUI_DEL, SYM_SPC
      //             |----------+----------+----------|
        ),
    /* Keymap 1: Windows Basic layer
     *
     * ,--------------------------------------------------.           ,--------------------------------------------------.
     * |   `    |   1  |   2  |   3  |   4  |   5  |  \   |           |   -  |   6  |   7  |   8  |   9  |   0  |   =    |
     * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
     * | Tab    |   Q  |   W  |   E  |   R  |   T  |   (  |           |  [   |   Y  |   U  |   I  |   O  |   P  |   '    |
     * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
     * |GUI / \ |   A  |   S  |   D  |   F  |   G  |------|           |------|   H  |   J  |   K  |   L  |  ;   |RCtrl / \ |
     * |--------+------+------+------+------+------|   )  |           |   ]  |------+------+------+------+------+--------|
  * | Shift/Esc |   Z  |   X  |   C  |   V  |   B  |      |           |      |   N  |   M  |   ,  |   .  |  /   | Shift/Esc  |
     * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
     *   |  Up  | Down | Left | Right| Alt/`|                                       |Insert| Left | Right|  Up  | Down |
     *   `----------------------------------'                                       `----------------------------------'
     *                                        ,-------------.       ,-------------.
     *                                        | End  | Home |       | PgUp  |PgDn   |
     *                                 ,------|------|------|       |------+--------+------.
     *                                 | Enter|Backsp| Ply  |       | VolU |        |Space |
     *                                 |   /  |ace / |------|       |------|  Del/  |  /   |
     *                                 |Num_U |CTRL  | Mute |       | VolD |  CTRL  |SYM_U |
     *                                 `--------------------'       `----------------------'
     */
    [_WINDOWS] = LAYOUT_ergodox(  // layer 1 : default
      // left hand
      _______    ,   _______ ,  _______ ,  _______ , _______  , _______  , _______  ,
//   |------------+----------+----------+----------+----------+----------+------------|
        _______   ,  _______ , _______  , _______  ,  _______ ,  _______ ,  _______,
//   |------------+----------+----------+----------+----------+----------+
        GUI_BSLSH ,  _______ ,  _______ ,  _______ ,  _______ ,   _______ ,//------------|
//   |------------+----------+----------+----------+----------+----------+
         _______  ,  _______ ,  _______ , _______  , _______  , _______  , _______ ,
//   |------------+----------+----------+----------+----------+----------+------------|
           _______ , _______  , _______  , _______  , _______  ,
//      |----------+----------+----------+----------+----------|
                                                                  _______ ,   _______ ,
//                                                             |----------+----------|
                                                                            _______  ,
//                                                                        |----------|
                                                        _______ , CTRL_BSPC  ,  _______  ,
//                                                  |----------+----------+----------|
      // right hand
                   _______  ,  _______ , _______  , _______  , _______  , _______  , _______   ,
//             |------------+----------+----------+----------+----------+----------+------------|
                 _______    , _______  , _______  , _______  , _______  , _______  ,  _______  ,
//             |------------+----------+----------+----------+----------+----------+------------|
                              _______  , _______  , _______  , _______  , _______  , _______,
//                          |----------+----------+----------+----------+----------+------------|
                 _______    , _______  ,  _______ ,  _______ ,  _______ , _______  , _______,
//             |------------+----------+----------+----------+----------+----------+------------|
                                     _______ ,  _______ ,  _______ ,  _______ ,  _______ ,
//                                |----------+----------+----------+----------+----------|
                 _______  , _______ ,
//             |----------+----------|
                _______ ,
//             |----------|
                _______  ,  CTRL_DEL,   _______
//             |----------+----------+----------|
  ),

  /* Keymap 2: Windows Basic layer
   *
   * ,--------------------------------------------------.           ,--------------------------------------------------.
   * |   `    |   1  |   2  |   3  |   4  |   5  |  \   |           |   -  |   6  |   7  |   8  |   9  |   0  |   =    |
   * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
   * | Tab    |   Q  |   W  |   E  |   R  |   T  |   (  |           |  [   |   Y  |   U  |   I  |   O  |   P  |   '    |
   * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
   * |Ctrl/ \ |   A  |   S  |   D  |   F  |   G  |------|           |------|   H  |   J  |   K  |   L  |  ;   |Enter \ |
   * |--------+------+------+------+------+------|   )  |           |   ]  |------+------+------+------+------+--------|
* | Shift/Esc |   Z  |   X  |   C  |   V  |   B  |      |           |      |   N  |   M  |   ,  |   .  |  /   | Shift/Esc  |
   * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
   *   |  Up  | Down | Left | Right|   `  |                                       |Insert| Left | Right|  Up  | Down |
   *   `----------------------------------'                                       `----------------------------------'
   *                                        ,-------------.       ,-------------.
   *                                        |      | T_GM |       | PgUp  |PgDn   |
   *                                 ,------|------|------|       |------+--------+------.
   *                                 | Space|Backsp| Ply  |       | VolU |        |Space |
   *                                 |      |ace / |------|       |------|  Del/  | /    |
   *                                 |      |ALT   | Mute |       | VolD |  GUI   |SYM   |
   *                                 `--------------------'       `----------------------'
   */
  [_GAMING] = LAYOUT_ergodox(  // layer 2: default
    // left hand
    _______    ,   _______ ,  _______ ,  _______ , _______  , _______  , _______  ,
//   |------------+----------+----------+----------+----------+----------+------------|
      _______   ,  _______ , _______  , _______  ,  _______ ,  _______ ,  _______,
//   |------------+----------+----------+----------+----------+----------+
      _______ ,  _______ ,  _______ ,  _______ ,  _______ ,   _______ ,//------------|
//   |------------+----------+----------+----------+----------+----------+
      _______  ,  _______ ,  _______ , _______  , _______  , _______  , _______ ,
//   |------------+----------+----------+----------+----------+----------+------------|
         _______ , _______  , _______  , _______  , KC_GRAVE  ,
//      |----------+----------+----------+----------+----------|
                                                                XXXXXXX ,   T_GM ,
//                                                             |----------+----------|
                                                                            _______  ,
//                                                                        |----------|
                                                      KC_SPC   , LALT_BSPC, _______  ,
//                                                  |----------+----------+----------|
    // right hand
                 _______  ,  _______ , _______  , _______  , _______  , _______  , _______   ,
//             |------------+----------+----------+----------+----------+----------+------------|
               _______    , _______  , _______  , _______  , _______  , _______  ,  _______  ,
//             |------------+----------+----------+----------+----------+----------+------------|
                            _______  , _______  , _______  , _______  , _______  , SYM_ENT,
//                          |----------+----------+----------+----------+----------+------------|
               _______    , _______  ,  _______ ,  _______ ,  _______ , _______  , KC_GRAVE,
//             |------------+----------+----------+----------+----------+----------+------------|
                                   _______ ,  _______ ,  _______ ,  _______ ,  _______ ,
//                                |----------+----------+----------+----------+----------|
               _______  , _______ ,
//             |----------+----------|
              _______ ,
//             |----------|
              _______  ,  _______,   _______
//             |----------+----------+----------|
),
    //
      /* Keymap 3: General Utility Layer
       *
       * ,--------------------------------------------------.           ,--------------------------------------------------.
       * |   `    |   1  |   2  |   3  |   4  |   5  |  \   |           |   -  |   =  |   7  |   8  |   9  |   0  |Backspace|
       * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
       * | Tab    |   +  |   *  |   +  |   =  |   _  |   {  |           |  [   |   +  |   4  |   5  |   6  |   *  |Backspace|
       * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
       * |Ctrl/ \ |   -  |   /  |   -  |   =  |   _  |------|           |------|   -  |   1  |   2  |   3  |   /  |Enter |
       * |--------+------+------+------+------+------|   }  |           |   ]  |------+------+------+------+------+--------|
       * | Shift/Esc |   %  |   <  |   {  |   }  |   >  |      |           |      |   ,  |   \  |   0  |   .  |Enter |Enter  |
       * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
       *   |  Up  | Down | Left | Right| Alt/`|                                       |Insert| Left | Right|  Up  | Down |
       *   `----------------------------------'                                       `----------------------------------'
       *                                        ,-------------.       ,-------------.
       *                                        | End  | Home |       | PgUp  |PgDn   |
       *                                 ,------|------|------|       |------+--------+------.
       *                                 | Enter|Backsp| Ply  |       | VolU |        |Space |
       *                                 |   /  |ace / |------|       |------|  Del/  |  /   |
       *                                 |  L1  |GUI   | Mute |       | VolD |  GUI   | L1  |
       *                                 `--------------------'       `----------------------'
       */
    //
  [_UTILITY] = LAYOUT_ergodox(  // layer 3 : General Utility Layer
        // left hand
        _______,      _______,    _______,    _______,   _______,   _______,   _______,
  //   |------------+----------+----------+----------+----------+----------+------------|
        _______,      KC_EXLM,     KC_AT,   KC_HASH,  KC_DLR,     KC_PERC,   KC_CIRC,
  //   |------------+----------+----------+----------+----------+----------+
        _______,      KC_MINS,    KC_SLSH,    KC_MINS,  KC_EQUAL,  KC_UNDS  ,//------------|
  //   |------------+----------+----------+----------+----------+----------+
        _______,      KC_PERC,    KC_LT,  KC_LBRACKET,KC_RBRACKET,  KC_GT,  KC_RCBR,
  //   |------------+----------+----------+----------+----------+----------+------------|
        _______,      _______,    _______,  _______,    _______,
  //      |----------+----------+----------+----------+----------|
                                                                  _______   ,   _______ ,
  //                                                             |----------+----------|
                                                                              _______  ,
  //                                                                        |----------|
                                                        _______,  _______   ,  _______  ,
  //                                                  |----------+----------+----------|
        // right hand
                  _______,      KC_EQUAL,    KC_7,      KC_8,      KC_9,    KC_P0,    KC_BSPC,
  //             |------------+----------+----------+----------+----------+----------+------------|
                  _______,      KC_ASTR,    KC_4,      KC_5,      KC_6,    KC_PLUS,  KC_BSPC,
  //             |------------+----------+----------+----------+----------+----------+------------|
                                KC_SLSH,     KC_1,    KC_2,      KC_3,     KC_MINS,  KC_PENT,
  //                          |----------+----------+----------+----------+----------+------------|
                  _______,      KC_PCMM,   KC_BSLASH,    KC_0,    KC_PDOT,    KC_PENT,  KC_PENT,
  //             |------------+----------+----------+----------+----------+----------+------------|
                                      _______,    _______,  _______,    _______,  _______,
  //                                |----------+----------+----------+----------+----------|
                  _______  , _______,
  //             |----------+----------|
                  _______ ,
  //             |----------|
                  _______,     _______,    _______
  //             |----------+----------+----------|
    ),

    //
      /* Keymap 4 : number / utility
       *
       * ,--------------------------------------------------.           ,--------------------------------------------------.
       * |   `    |GBRst |GBPst |VSCol |AExp  |ACol  |      |           |      | CLEAR| CLEAR|   =  |   +  |   *  |  =     |
       * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
       * | Tab    |   1  |   2  |   3  |   4  |   5  |   {  |           |  [   |   6  |   7  |   8  |   9  |   0  |Backspace|
       * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
       * |Ctrl/ \ |   <  |   /  |   -  |   =  |   _  |------|           |------|   .  |   4  |   5  |   6  |   -  |Enter   |
       * |--------+------+------+------+------+------|   }  |           |   ]  |------+------+------+------+------+--------|
    * | Shift/Esc |   >  |   *  |   +  |   =  |   _  |      |           |      |   ,  |   1  |   2  |   3  |  /   |Enter   |
       * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
       *   |  Up  | Down | Left | Right| Alt/`|                                       |  0   |  0   |  0   | Left | Right|
       *   `----------------------------------'                                       `----------------------------------'
       *                                        ,-------------.       ,-------------.
       *                                        | End  | Home |       | PgUp  |PgDn   |
       *                                 ,------|------|------|       |------+--------+------.
       *                                 | Enter|Backsp| Ply  |       | VolU |        |Space |
       *                                 |   /  |ace / |------|       |------|  Del/  |  /   |
       *                                 |MOUS_U|GUI   | Mute |       | VolD |  GUI   |SYM_U |
       *                                 `--------------------'       `----------------------'
       */
    //
  [_NUM_UTIL] = LAYOUT_ergodox(  // layer 4 : number / utility
        // left hand
        _______,      GB_RESET,   GB_PASTE,VS_COLLAPSE, EXPAND, COLLAPSE,    XXXXXXX,
  //   |------------+----------+----------+----------+----------+----------+------------|
        _______,        KC_1,      KC_2,      KC_3,      KC_4,     KC_5,     KC_LCBR,
  //   |------------+----------+----------+----------+----------+----------+
        _______,      KC_LT,    KC_SLSH,    KC_MINS,  KC_EQUAL,  KC_UNDS  ,//------------|
  //   |------------+----------+----------+----------+----------+----------+
        _______,      KC_GT,    KC_ASTR,    KC_PLUS,  KC_EQUAL,   KC_UNDS,  KC_RCBR,
  //   |------------+----------+----------+----------+----------+----------+------------|
        _______,      _______,    _______,  _______,    _______,
  //      |----------+----------+----------+----------+----------|
                                                                  _______   ,   _______ ,
  //                                                             |----------+----------|
                                                                              _______  ,
  //                                                                        |----------|
                                                        MOUSE_ENT,  _______   ,  _______  ,
  //                                                  |----------+----------+----------|
        // right hand
                  XXXXXXX,      KC_CLEAR,   KC_CLEAR,    KC_EQUAL,  KC_PLUS,  KC_ASTR,    KC_EQUAL,
  //             |------------+----------+----------+----------+----------+----------+------------|
                  _______,      KC_6 ,    KC_7,      KC_8,      KC_9,    KC_0,  KC_BSPC,
  //             |------------+----------+----------+----------+----------+----------+------------|
                                KC_DOT,     KC_4,      KC_5,       KC_6,   KC_MINS,   KC_ENT,
  //                          |----------+----------+----------+----------+----------+------------|
                  _______,      KC_COMM,     KC_1,      KC_2,      KC_3,    KC_SLSH,    KC_ENT,
  //             |------------+----------+----------+----------+----------+----------+------------|
                                       KC_0,      KC_0  ,    KC_0  ,  KC_LEFT ,  KC_RGHT ,
  //                                |----------+----------+----------+----------+----------|
                  _______  , _______,
  //             |----------+----------|
                  _______ ,
  //             |----------|
                  _______,     _______,    _______
  //             |----------+----------+----------|
    ),

    /* Keymap 5: symbol / utility
     *
     * ,--------------------------------------------------.           ,--------------------------------------------------.
     * |   `    |GBRst |GBPst |VSCol |AExp  |ACol  |      |           |      |SFunc |Jfunc |      |      |      | TDMain |
     * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
     * | Tab    |   !  |   @  |   #  |   $  |   %  |   {  |           |  [   |   ^  |   &  |   *  |   (  |   )  | TDWin  |
     * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
     * |Ctrl/ \ |   <  |   /  |   -  |   =  |   _  |------|           |------|TD () |TD [] |TD {} |      |      | TDGame |
     * |--------+------+------+------+------+------|   }  |           |   ]  |------+------+------+------+------+--------|
  * | Shift/Esc |   >  |   *  |   +  |   =  |   _  |      |           |      |      |      |      |      |      |        |
     * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
     *   |  Up  | Down | Left | Right| Alt/`|                                       | Alt/`| Left | Right|  Up  | Down |
     *   `----------------------------------'                                       `----------------------------------'
     *                                        ,-------------.       ,-------------.
     *                                        | End  | Home |       | PgUp  |PgDn   |
     *                                 ,------|------|------|       |------+--------+------.
     *                                 | Enter|Backsp| Ply  |       | VolU |        |Space |
     *                                 |   /  |ace / |------|       |------|  Del/  |  /   |
     *                                 |  L1  |GUI   | Mute |       | VolD |  GUI   | L1  |
     *                                 `--------------------'       `----------------------'
     */
  //
[_SYM_UTIL] = LAYOUT_ergodox(  // layer 5 : number / utility
      // left hand
      _______,      GB_RESET,   GB_PASTE,VS_COLLAPSE, EXPAND, COLLAPSE,    XXXXXXX,
//   |------------+----------+----------+----------+----------+----------+------------|
      _______,      KC_EXLM,   KC_AT,     KC_HASH,     KC_DLR,   KC_PERC,  KC_LCBR,
//   |------------+----------+----------+----------+----------+----------+
      _______,      KC_LT,    KC_SLSH,    KC_MINS,  KC_EQUAL,  KC_UNDS  ,//------------|
//   |------------+----------+----------+----------+----------+----------+
      _______,      KC_GT,    KC_ASTR,    KC_PLUS,  KC_KP_EQUAL,  KC_UNDS,  KC_RCBR,
//   |------------+----------+----------+----------+----------+----------+------------|
      _______,      _______,    _______,  _______,    _______,
//      |----------+----------+----------+----------+----------|
                                                                _______   ,   _______ ,
//                                                             |----------+----------|
                                                                            _______  ,
//                                                                        |----------|
                                                      _______,  _______   ,  _______  ,
//                                                  |----------+----------+----------|
      // right hand
                XXXXXXX,      SLDTY_FUNC,   JS_FUNC ,   XXXXXXX ,  XXXXXXX,  XXXXXXX,    T_MAIN,
//             |------------+----------+----------+----------+----------+----------+------------|
                  _______,      KC_CIRC,   KC_AMPR,    KC_ASTR,   KC_LPRN,   KC_RPRN,   T_WIN,
//             |------------+----------+----------+----------+----------+----------+------------|
                 TD(TD_PAREN),TD(TD_BRACK),TD(TD_CURLY),  XXXXXXX, XXXXXXX,  T_GM,
//                          |----------+----------+----------+----------+----------+------------|
                  _______,      XXXXXXX,    XXXXXXX, XXXXXXX,   XXXXXXX,   XXXXXXX, XXXXXXX,
//             |------------+----------+----------+----------+----------+----------+------------|
                              _______,    ATM_P_L   ,  ATM_P_R ,  ATM_P_U ,  ATM_P_D,
                    //      |----------+----------+----------+----------+----------|

                _______  , _______,
//             |----------+----------|
                _______ ,
//             |----------|
                _______,     _______,    _______
//             |----------+----------+----------|
  ),

  /* Keymap 6: mouse / utility
   *
   * ,--------------------------------------------------.           ,--------------------------------------------------.
   * |   `    |GBRst |GBPst |VSCol |AExp  |ACol  |      |           |      |TDMain|TDWin |TDGame|      |      |        |
   * |--------+------+------+------+------+-------------|           |------+------+------+------+------+------+--------|
   * | Tab    |   !  |   @  |   #  |   $  |   %  |   {  |           |  [   |TD () |LClick| MUp  |RClick|3Click|        |
   * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
   * |Ctrl/ \ |   <  |   /  |   -  |   =  |   _  |------|           |------|TD [] |MLeft |MDown |MRight|4Click|        |
   * |--------+------+------+------+------+------|   }  |           |   ]  |------+------+------+------+------+--------|
* | Shift/Esc |   >  |   *  |   +  |   =  |   _  |      |           |      |TD {} |MW Dn | MW Up|      |      |        |
   * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
   *   |  Up  | Down | Left | Right| Alt/`|                                       | Alt/`| Left | Right|  Up  | Down |
   *   `----------------------------------'                                       `----------------------------------'
   *                                        ,-------------.       ,-------------.
   *                                        | End  | Home |       | PgUp  |PgDn   |
   *                                 ,------|------|------|       |------+--------+------.
   *                                 | Enter|Backsp| Ply  |       | VolU |        |Space |
   *                                 |   /  |ace / |------|       |------|  Del/  |  /   |
   *                                 |  L1  |GUI   | Mute |       | VolD |  GUI   | L1  |
   *                                 `--------------------'       `----------------------'
   */
//
[_MOUSE_UTIL] = LAYOUT_ergodox(  // layer 6 : mouse / utility
    // left hand
    _______,      GB_RESET,   GB_PASTE,VS_COLLAPSE, EXPAND, COLLAPSE,    XXXXXXX,
//   |------------+----------+----------+----------+----------+----------+------------|
    _______,      KC_GT,    KC_ASTR,    KC_PLUS,  KC_EQUAL,   KC_UNDS,   KC_LCBR,
//   |------------+----------+----------+----------+----------+----------+
    _______,      KC_LT,    KC_SLSH,    KC_MINS,  KC_EQUAL,  KC_UNDS  ,//------------| |------------+----------+----------+----------+----------+----------+
    _______,      KC_PIPE,  KC_GRAVE,  KC_QUOT,  KC_DQT,   KC_UNDS,  KC_RCBR,
//   |------------+----------+----------+----------+----------+----------+------------|
    _______,      _______,    _______,  _______,    _______,
//      |----------+----------+----------+----------+----------|
                                                              _______   ,   _______ ,
//                                                             |----------+----------|
                                                                          _______  ,
//                                                                        |----------|
                                                    _______,  _______   ,  _______  ,
//                                                  |----------+----------+----------|
    // right hand
              XXXXXXX,      XXXXXXX,   XXXXXXX ,   XXXXXXX ,  XXXXXXX,  XXXXXXX,    T_MAIN,
//             |------------+----------+----------+----------+----------+----------+------------|
                _______,   TD(TD_PAREN),  KC_BTN1,  KC_MS_U,   KC_BTN2,    KC_BTN3,  T_WIN,
//             |------------+----------+----------+----------+----------+----------+------------|
                           TD(TD_BRACK),  KC_MS_L,   KC_MS_D,  KC_MS_R,    KC_BTN4,  T_GM,
//                          |----------+----------+----------+----------+----------+------------|
                _______,   TD(TD_CURLY),  KC_WH_D,    KC_WH_U, XXXXXXX,  XXXXXXX,  XXXXXXX,
//             |------------+----------+----------+----------+----------+----------+------------|
                                      _______,    ATM_P_L,  ATM_P_R,    ATM_P_U,  ATM_P_D,
                                //   |----------+----------+----------+----------+----------|
              _______  , _______,
//             |----------+----------|
              _______ ,
//             |----------|
              _______,     _______,    _______
//             |----------+----------+----------|
),
};

/* id for user defined functions */
enum function_id {
    TEENSY_KEY,
};
//
/*
 * Fn action definition
 */
const uint16_t PROGMEM fn_actions[] = {
  // [0]   =  ACTION_FUNCTION(TEENSY_KEY),                    // FN0 - Teensy key
	// [1]   =  ACTION_LAYER_SET(0, ON_PRESS),
  // [2]   =  ACTION_MODS_TAP_KEY(MOD_LSFT, KC_ESCAPE),
  // [3]   =  ACTION_MODS_TAP_KEY(KC_BSPC, KC_LGUI),
  // [4]   =  ACTION_MODS_TAP_KEY(KC_SPACE, KC_LGUI),
  //      	//[11]  =  ACTION_MODS_KEY(MOD_LSFT, KC_COMM),
	// //[12]  =  ACTION_MODS_KEY(MOD_LSFT, KC_DOT),
  //
	// //[14]  =  ACTION_MODS_KEY(MOD_LSFT, KC_SLSH),
	// //[17]  =  ACTION_MODS_KEY(MOD_LSFT, KC_SCLN),
	// //[20]  =  ACTION_MODS_KEY(MOD_LSFT, KC_5),
	// //[21]  =  ACTION_MODS_KEY(MOD_LSFT, KC_QUOT),
	// [23]  =  ACTION_LAYER_SET(3, ON_PRESS),
  // [24]  =  ACTION_LAYER_SET(2, ON_PRESS),
	// [25]  =  ACTION_MODS_TAP_KEY(MOD_LCTL, KC_TAB),
	// [26]  =  ACTION_LAYER_SET(1, ON_PRESS),
	// [27]  =	 ACTION_LAYER_TAP_KEY(1, KC_CAPS),
  // [28]  =  ACTION_MODS_TAP_KEY(MOD_RCTL,KC_BSLS),
	// //[29]  =  ACTION_LAYER_TOGGLE(4),
  // [29]  = ACTION_MODS_TAP_KEY(MOD_RSFT,KC_ESC),
	// [30]  =  ACTION_LAYER_TAP_KEY(1, KC_QUOT),
  // [31]  =  ACTION_LAYER_MOMENTARY(2),
	// //[]  =  ACTION_LAYER_TAP_KEY(4, KC_S),
};
//
//



//Tap Dance Definitions
qk_tap_dance_action_t tap_dance_actions[] = {
  //Tap once for Esc, twice for Caps Lock
  [TD_PAREN]  = ACTION_TAP_DANCE_DOUBLE(KC_LPRN, KC_RPRN),
  [TD_BRACK]  = ACTION_TAP_DANCE_DOUBLE(KC_LBRC, KC_RBRC),
  [TD_CURLY]  = ACTION_TAP_DANCE_DOUBLE(KC_LCBR, KC_RCBR),
  // [TD_MAIN]  = ACTION_TAP_DANCE_DOUBLE(KC_DOT, T_MAIN),
  // [TD_WIN]  = ACTION_TAP_DANCE_DOUBLE(KC_DOT, T_WIN),
  // [TD_GAME]  = ACTION_TAP_DANCE_DOUBLE(KC_DOT, T_GM),
// Other declarations would go here, separated by commas, if you have them
};
// //In Layer declaration, add tap dance item in place of a key code
// TD(TD_ESC_CAPS)

const macro_t *action_get_macro(keyrecord_t *record, uint8_t id, uint8_t opt)
{
      switch(id) {
        case 0:
          if (record->event.pressed){  // Expand Atom nested functions
          return MACRO( D(LGUI), D(LALT), T(LBRC), U(LALT), U(LGUI), END  );
          }
        case 1:
          if (record->event.pressed){  // Collapse Atom nested functions
          return MACRO( D(LGUI), D(LALT), T(RBRC), U(LALT), U(LGUI),  END  );
          }
        case 2:
          if (record->event.pressed){  // => {
            SEND_STRING("=> {");
            return false;
          }
        case 3:
          if (record->event.pressed){  // Ctrl Alt Delete
          return MACRO( D(LCTRL), D(LALT), T(DEL), U(LALT), U(LCTRL),  END  );
          }
        case 4:
          if (record->event.pressed){   // Git Bash Paste
          return MACRO( D(LSHIFT), D(INSERT), U(LSHIFT), U(INSERT),  END  );
          }
        case 5:
          if (record->event.pressed){   // Git Bash Reset
          return MACRO( D(LALT), D(F8), U(LALT), U(F8),  END  );
          }
        case 6:
          if (record->event.pressed){   // Visual Studio Collapse Menus
          return MACRO( D(LCTRL), T(K), U(LCTRL), D(LCTRL), T(2), U(LCTRL),  END  );
          }
        case 7:
          if (record->event.pressed){  // () {}
            return MACRO( D(LSHIFT), T(9), U(LSHIFT),
                          D(LSHIFT), T(0), U(LSHIFT),
                          T(SPC),
                          D(LSHIFT), T(LBRC), U(LSHIFT),
                          D(LSHIFT), T(RBRC), U(LSHIFT),
                          T(LEFT), END );
          }
        case 8:
          if (record->event.pressed){   // Visual Studio Collapse Menus
          return MACRO( D(LGUI), D(K), T(LEFT), U(K), U(LGUI),  END  );
          }
        case 9:
          if (record->event.pressed){   // Visual Studio Collapse Menus
          return MACRO( D(LGUI), D(K), T(RIGHT), U(K), U(LGUI),  END  );
          }
        case 10:
          if (record->event.pressed){   // Visual Studio Collapse Menus
          return MACRO( D(LGUI), D(K), T(DOWN), U(K), U(LGUI),  END  );
          }
        case 11:
          if (record->event.pressed){   // Visual Studio Collapse Menus
          return MACRO( D(LGUI), D(K), T(UP), U(K), U(LGUI),  END  );
          }
      }
    return MACRO_NONE;
  };
//
// Runs just one time when the keyboard initializes.
void matrix_init_user(void) {

};
//
void action_function(keyrecord_t *event, uint8_t id, uint8_t opt)
{
    if (id == TEENSY_KEY) {
        clear_keyboard();
        print("\n\nJump to bootloader... ");
        wait_ms(250);
        bootloader_jump(); // should not return
        print("not supported.\n");
    }
};
